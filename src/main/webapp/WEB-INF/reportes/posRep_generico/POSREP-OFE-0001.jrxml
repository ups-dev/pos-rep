<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="POSREP-OFE-0001" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="41e59c34-cad2-4097-b6a5-c3d0e020b34e">
	<property name="ireport.zoom" value="1.5"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<template><![CDATA["/../../reportes/estilosRep/Estilo_insRep.jrtx"]]></template>
	<parameter name="pv_usuario" class="java.lang.String"/>
	<parameter name="pn_pel_codigo" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="pn_est_codigo" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="pv_mal_nivel" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select  dpos.dee_descripcion programa,
        dsed.dee_descripcion sede,
        dcam.dee_descripcion campus,
        TRIM(TO_CHAR(pee.pee_fecha_inicial,'Month'))||' '||extract (year from pee.pee_fecha_inicial)||' - '||TRIM(TO_CHAR(pee.pee_fecha_final,'Month'))||' '||extract (year from pee.pee_fecha_final) fecha_semestre,
        pel.pel_descripcion ||' ('||extract (year from pel.pel_fecha_inicio)||' - '||extract (year from pel.pel_fecha_fin)||') ' cohorte,
        per.per_codigo,
        per.per_nro_identificacion  nro_identificacion,
        per.per_apellidos ||' '||per.per_nombres docente,
        mtr.mat_codigo,
        mtr.mat_descripcion         modulo,
        mal.mal_nivel               nivel,
        gru.gru_descripcion         grupo,
        dis.dis_fecha_inicio,
        dis.dis_fecha_fin,
        ( select  decode(emp2.emp_nombre,'UNIVERSIDAD POLITECNICA SALESIANA','RECTORADO',emp2.emp_nombre)
          from    gth.gth_contrato con,
                  gth.gth_empresa  emp,
                  gth.gth_empresa   emp2
          where   emp.emp_codigo = con.emp_codigo_ubicacion
          and     emp.emp_codigo_superior = emp2.emp_codigo
          and     (con.per_codigo = per.per_codigo
          and     (dis.dis_fecha_inicio between con.con_fecha_inicio and  con.con_fecha_fin
          and      dis.dis_fecha_fin     between con.con_fecha_inicio and  con.con_fecha_fin)
          )) sede_pertenece

from    ofe.ofe_grupo               gru,
        ped.ped_malla               mal,
        ped.ped_materia             mtr,
        ped.ped_proyecto_educacion  pre,
        ped.ped_des_est_pro_edu     dep,
        org.org_descripcion_estructura dpos,
        org.org_descripcion_estructura dcam,
        org.org_descripcion_estructura dsed,
        org.org_estructura          pos,
        org.org_estructura          cam,
        org.org_estructura          sed,
        org.org_periodo_estructura  pee,
        org.org_periodo_lectivo     pel,
        ofe.ofe_distributivo        dis,
        gth.gth_persona             per,
        ped.ped_est_mod_pro_edu     empe
where   pre.pre_numero  = mal.pre_numero
AND     mal.mat_codigo  = mtr.mat_codigo
AND     mal.mal_codigo  = gru.mal_codigo
AND     gru.pel_codigo  = pel.pel_codigo
AND     dep.pre_numero  = pre.pre_numero
AND     dep.dee_codigo  = dpos.dee_codigo
AND     pee.est_codigo  = pos.est_codigo
AND     pos.dee_codigo  = dpos.dee_codigo
AND     cam.est_codigo  = pos.est_codigo_padre
AND     cam.est_codigo  = empe.est_codigo
AND     cam.dee_codigo  = dcam.dee_codigo
AND     sed.est_codigo  = cam.est_codigo_padre
AND     sed.dee_codigo  = dsed.dee_codigo
AND     pre.tpe_codigo  = 8
AND     pel.pel_codigo  = pee.pel_codigo
AND     pee.pel_codigo  = $P{pn_pel_codigo}
AND     pos.est_codigo  IN (SELECT est_codigo e
                            FROM   org.org_estructura e
                            WHERE  e.est_nivel  = 4
                            START WITH e.est_codigo = $P{pn_est_codigo}
                            CONNECT BY PRIOR e.est_codigo = e.est_codigo_padre)
AND     mal.mal_nivel   LIKE $P{pv_mal_nivel}
AND     gru.gru_codigo    = dis.gru_codigo
AND     dis.per_codigo    = per.per_codigo(+)
AND     empe.emp_codigo    = gru.emp_codigo
ORDER   BY sede,campus,programa,nivel,modulo,grupo,docente]]>
	</queryString>
	<field name="PROGRAMA" class="java.lang.String"/>
	<field name="SEDE" class="java.lang.String"/>
	<field name="CAMPUS" class="java.lang.String"/>
	<field name="FECHA_SEMESTRE" class="java.lang.String"/>
	<field name="COHORTE" class="java.lang.String"/>
	<field name="PER_CODIGO" class="java.math.BigDecimal"/>
	<field name="NRO_IDENTIFICACION" class="java.lang.String"/>
	<field name="DOCENTE" class="java.lang.String"/>
	<field name="MAT_CODIGO" class="java.math.BigDecimal"/>
	<field name="MODULO" class="java.lang.String"/>
	<field name="NIVEL" class="java.math.BigDecimal"/>
	<field name="GRUPO" class="java.lang.String"/>
	<field name="DIS_FECHA_INICIO" class="java.sql.Timestamp"/>
	<field name="DIS_FECHA_FIN" class="java.sql.Timestamp"/>
	<field name="SEDE_PERTENECE" class="java.lang.String"/>
	<group name="FORMULARIO_GROUP" isReprintHeaderOnEachPage="true">
		<groupExpression><![CDATA[]]></groupExpression>
	</group>
	<group name="sede_grup" isStartNewPage="true">
		<groupExpression><![CDATA[$F{SEDE}]]></groupExpression>
		<groupHeader>
			<band height="16">
				<rectangle>
					<reportElement stretchType="RelativeToBandHeight" x="1" y="0" width="554" height="16" isPrintWhenDetailOverflows="true" uuid="922ab071-5b2f-4a1a-891c-d66cf6650136"/>
					<graphicElement>
						<pen lineWidth="0.25"/>
					</graphicElement>
				</rectangle>
				<staticText>
					<reportElement style="Estilo_titulo" x="2" y="0" width="84" height="16" uuid="4b65ae6d-cd5d-4630-905e-318fb9ecd1b7"/>
					<box>
						<topPen lineWidth="0.0"/>
						<leftPen lineWidth="0.0"/>
						<bottomPen lineWidth="0.0"/>
						<rightPen lineWidth="0.0"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[SEDE:]]></text>
				</staticText>
				<textField>
					<reportElement style="Estilo_contenido" x="87" y="0" width="438" height="16" uuid="aa839aef-8301-4282-bc62-c4c22a0e969a"/>
					<textElement verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{SEDE}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
	</group>
	<group name="camp_grup" isStartNewPage="true">
		<groupExpression><![CDATA[$F{CAMPUS}]]></groupExpression>
		<groupHeader>
			<band height="16">
				<rectangle>
					<reportElement stretchType="RelativeToBandHeight" x="1" y="0" width="554" height="16" isPrintWhenDetailOverflows="true" uuid="15c4d18f-aea3-4e1d-9df3-6875f4586525"/>
					<graphicElement>
						<pen lineWidth="0.25"/>
					</graphicElement>
				</rectangle>
				<textField>
					<reportElement style="Estilo_contenido" x="87" y="0" width="438" height="16" uuid="26986cdb-8280-45ea-83c9-d636e3a05ca8"/>
					<textElement verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{CAMPUS}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement style="Estilo_titulo" x="2" y="0" width="84" height="16" uuid="b2429953-fd20-4c84-80cb-558065658706"/>
					<textElement verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[CAMPUS:]]></text>
				</staticText>
			</band>
		</groupHeader>
	</group>
	<group name="prog_grup" isStartNewPage="true">
		<groupExpression><![CDATA[]]></groupExpression>
		<groupHeader>
			<band height="16">
				<rectangle>
					<reportElement style="Estilo_titulo" stretchType="RelativeToBandHeight" x="1" y="0" width="554" height="16" isPrintWhenDetailOverflows="true" uuid="ecb73770-b117-482a-9135-f71fde6387a3"/>
					<graphicElement>
						<pen lineWidth="0.25"/>
					</graphicElement>
				</rectangle>
				<staticText>
					<reportElement style="Estilo_titulo" x="2" y="0" width="85" height="16" uuid="8477fc6a-f910-41f5-8490-84f0d1baec77"/>
					<textElement verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[PROGRAMA:]]></text>
				</staticText>
				<textField>
					<reportElement style="Estilo_contenido" x="88" y="0" width="437" height="16" uuid="dd3dd73c-c7b5-420c-8370-cb04b37a8f29"/>
					<textElement verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{PROGRAMA}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
	</group>
	<group name="nivel_grup" isStartNewPage="true">
		<groupExpression><![CDATA[$F{NIVEL}]]></groupExpression>
		<groupHeader>
			<band height="74">
				<rectangle>
					<reportElement style="Estilo_titulo" stretchType="RelativeToBandHeight" x="1" y="47" width="554" height="27" isPrintWhenDetailOverflows="true" uuid="bb701f5f-6628-45ec-9557-d1813a61dfbf"/>
					<graphicElement>
						<pen lineWidth="0.25"/>
					</graphicElement>
				</rectangle>
				<rectangle>
					<reportElement x="1" y="16" width="554" height="16" uuid="4cd86392-6d6b-4650-8401-844d76d6b2f5"/>
					<graphicElement>
						<pen lineWidth="0.25"/>
					</graphicElement>
				</rectangle>
				<rectangle>
					<reportElement x="1" y="32" width="554" height="16" uuid="2d89a492-4cd5-4b50-b1dd-ca2ffb0dc89f"/>
					<graphicElement>
						<pen lineWidth="0.25"/>
					</graphicElement>
				</rectangle>
				<rectangle>
					<reportElement style="Estilo_titulo" stretchType="RelativeToBandHeight" x="1" y="0" width="554" height="16" isPrintWhenDetailOverflows="true" uuid="d6e28bea-2c46-4b9d-96eb-0955c1064ab9"/>
					<graphicElement>
						<pen lineWidth="0.25"/>
					</graphicElement>
				</rectangle>
				<staticText>
					<reportElement style="Estilo_titulo" x="2" y="0" width="84" height="16" uuid="614c16fe-ce8d-45e7-a84e-2e0886550630"/>
					<box>
						<topPen lineWidth="0.0"/>
						<leftPen lineWidth="0.0"/>
						<bottomPen lineWidth="0.0"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[NIVEL:]]></text>
				</staticText>
				<textField>
					<reportElement style="Estilo_contenido" x="88" y="0" width="437" height="16" uuid="1d76bedc-a14a-4575-9e7b-1d3ef9fc12a9"/>
					<textElement verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{NIVEL}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement style="Estilo_titulo" x="2" y="32" width="83" height="16" uuid="197ae8fd-646a-467e-a831-1a2ede26655c"/>
					<box>
						<topPen lineWidth="0.0"/>
						<leftPen lineWidth="0.0"/>
						<bottomPen lineWidth="0.0"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[SEMESTRE:]]></text>
				</staticText>
				<textField>
					<reportElement style="Estilo_contenido" x="88" y="32" width="437" height="16" uuid="8059e1de-c21c-4650-9d5a-c99bd792733d"/>
					<textElement verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{FECHA_SEMESTRE}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement style="Estilo_titulo" x="3" y="58" width="219" height="16" isPrintWhenDetailOverflows="true" uuid="2198de5e-d833-4b10-8fe1-10d0e637ba9b"/>
					<textElement verticalAlignment="Top">
						<font size="7" isBold="true"/>
					</textElement>
					<text><![CDATA[DOCENTE]]></text>
				</staticText>
				<staticText>
					<reportElement style="Estilo_titulo" x="222" y="58" width="107" height="16" isPrintWhenDetailOverflows="true" uuid="162b9438-5af1-41da-a502-d663c427a89e"/>
					<textElement>
						<font size="7" isBold="true"/>
					</textElement>
					<text><![CDATA[SEDE A LA QUE PERTENECE]]></text>
				</staticText>
				<staticText>
					<reportElement style="Estilo_titulo" x="329" y="58" width="179" height="16" uuid="0a7e5ddf-e6a1-4a8a-a24d-083cb5fc5221"/>
					<textElement>
						<font size="7" isBold="true"/>
					</textElement>
					<text><![CDATA[MÓDULO]]></text>
				</staticText>
				<staticText>
					<reportElement style="Estilo_titulo" x="510" y="58" width="45" height="16" uuid="8a47f66f-b2f5-4775-9fea-6d19a7b16fae"/>
					<textElement>
						<font size="7" isBold="true"/>
					</textElement>
					<text><![CDATA[GRUPO]]></text>
				</staticText>
				<textField>
					<reportElement x="88" y="16" width="437" height="16" uuid="60e30567-dbab-47df-84c7-6a580a1a9656"/>
					<textElement verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{COHORTE}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement style="Estilo_titulo" x="2" y="16" width="84" height="16" uuid="0058002a-9dce-42c8-a9e6-83ae3bd1946b"/>
					<box>
						<topPen lineWidth="0.0"/>
						<leftPen lineWidth="0.0"/>
						<bottomPen lineWidth="0.0"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[COHORTE:]]></text>
				</staticText>
			</band>
		</groupHeader>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="68" splitType="Stretch">
			<staticText>
				<reportElement x="87" y="8" width="370" height="20" uuid="8ea67fb7-87ca-4929-97fd-e721c62bc85f"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[UNIVERSIDAD POLITECNICA SALESIANA]]></text>
			</staticText>
			<textField>
				<reportElement x="434" y="49" width="99" height="15" uuid="8e5effba-7258-4e5f-9a29-764a369c2df6"/>
				<textElement textAlignment="Right">
					<font fontName="SansSerif" size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["PÁGINA "+$V{PAGE_NUMBER}+" de"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="534" y="49" width="22" height="15" uuid="43900013-4c86-49bb-9101-1b71cd16fda9"/>
				<textElement>
					<font fontName="SansSerif" size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField pattern="dd-MMM-yyyy HH:mm:ss">
				<reportElement x="434" y="37" width="121" height="11" uuid="c183fefc-60d4-4297-a72d-3c846e7295f8"/>
				<textElement textAlignment="Right">
					<font fontName="SansSerif" size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="Estilo_titulo" x="115" y="28" width="319" height="20" uuid="d2d61470-2ed1-4a20-a5d2-bc0217482f35"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[SISTEMA DE POSGRADOS]]></text>
			</staticText>
			<staticText>
				<reportElement style="Estilo_titulo" x="115" y="48" width="319" height="20" uuid="865a698f-ebce-4bf6-bd0c-c082e55cf570"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[PERSONAL DOCENTE DE PROGRAMA]]></text>
			</staticText>
		</band>
	</pageHeader>
	<detail>
		<band height="16">
			<rectangle>
				<reportElement style="Estilo_titulo" stretchType="RelativeToBandHeight" x="1" y="0" width="554" height="16" isPrintWhenDetailOverflows="true" uuid="a117000b-8b01-4323-8b90-bf11ad2e4b84"/>
				<graphicElement>
					<pen lineWidth="0.25"/>
				</graphicElement>
			</rectangle>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement style="Estilo_contenido" x="3" y="0" width="46" height="16" isPrintWhenDetailOverflows="true" uuid="99705392-ebdd-4c36-a146-8f10a17c16ba"/>
				<textElement>
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{NRO_IDENTIFICACION}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="49" y="0" width="172" height="16" isPrintWhenDetailOverflows="true" uuid="1f542637-1f0d-4ef5-bdea-18d64ed8f031"/>
				<textElement>
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{DOCENTE}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="222" y="0" width="107" height="16" isPrintWhenDetailOverflows="true" uuid="edf6a7c4-6703-4d7d-ab52-0b26ac046fc0"/>
				<textElement>
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{SEDE_PERTENECE}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="358" y="0" width="149" height="16" isPrintWhenDetailOverflows="true" uuid="4b0b9527-4252-4187-94c1-66398d0099cd"/>
				<textElement>
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{MODULO}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="510" y="0" width="45" height="16" isPrintWhenDetailOverflows="true" uuid="3949c687-359a-4c91-983d-c7d0653167ff"/>
				<textElement>
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{GRUPO}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="329" y="0" width="29" height="16" isPrintWhenDetailOverflows="true" uuid="9cbc7cbf-6619-4d1b-8b5a-4cdb374dea06"/>
				<textElement>
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{MAT_CODIGO}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="20" splitType="Stretch">
			<textField>
				<reportElement x="457" y="0" width="98" height="20" uuid="561d4da4-7c95-4462-91b0-4b0d2da5ef37"/>
				<box>
					<topPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Bottom">
					<font size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{pv_usuario}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="0" y="0" width="87" height="20" uuid="c5a85c87-16d1-4c62-b923-e9281435359c"/>
				<box>
					<topPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Bottom">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Posrep_ofe_0001]]></text>
			</staticText>
		</band>
	</pageFooter>
</jasperReport>
