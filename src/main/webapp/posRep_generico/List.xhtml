<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:us="http://ups.edu.ec/ui/security"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:o="http://omnifaces.org/ui">
    
    <f:metadata>
        <o:importConstants type="ec.edu.ups.pos.rep.data.utils.PosRepConstants" />
    </f:metadata>
    <h:form id="PosReportesForm">
        <p:panel header="#{posRepBundle['PosResultadosTitle']}" id="RepCabecera">
            
            <p:growl id="notificacion" showDetail="true" sticky="false" life="7000"/>                          
            <h:panelGroup id="messagePanel">
                <p:messages id="listMessages" closable="true">
                    <p:effect type="pulsate" event="load" delay="200" speed="500">
                        <f:param name="times" value="1" />
                    </p:effect>
                </p:messages>
            </h:panelGroup>   
            
            <p:dataTable id="PosReportesSistemaDataTable"
                         widgetVar="PosReportesSistemaDataTableVar"
                         value="#{repReportesSistemaController.items}"
                         var="item"
                         rowKey="#{item.resCodigo}"
                         sortBy="#{item.resReporte}"
                         sortOrder="ascending"
                         paginator="true"
                         rows="10"
                         rowsPerPageTemplate="10,20,30,40,50"
                         selectionMode="single"
                         paginatorPosition="bottom"
                         emptyMessage="#{pedBundle['TableEmpty']}"
                         selection="#{repReportesSistemaController.selected}"
                         filteredValue="#{repReportesSistemaController.itemsFilter}">
                <p:ajax event="rowSelect" update=":PosReportesForm:PosRepExportToolbar, 
                                                  :PosReportesForm:alumno, 
                                                  :PosReportesForm:sede, 
                                                  :PosReportesForm:campus, 
                                                  :PosReportesForm:programa,
                                                  :PosReportesForm:cohorte,
                                                  :PosReportesForm:nivel,
                                                  :PosReportesForm:docente, 
                                                  :PosReportesForm:asignatura, 
                                                  :PosReportesForm:grupo,
                                                  :PosReportesForm:pagado" listener="#{posRepResultadoController.actualizaFiltros()}"/>
                <p:ajax event="filter" update=":PosReportesForm:PosRepExportToolbar, 
                                                  :PosReportesForm:alumno, 
                                                  :PosReportesForm:sede, 
                                                  :PosReportesForm:campus, 
                                                  :PosReportesForm:programa, 
                                                  :PosReportesForm:cohorte,  
                                                  :PosReportesForm:nivel,
                                                  :PosReportesForm:docente, 
                                                  :PosReportesForm:asignatura, 
                                                  :PosReportesForm:grupo,
                                                  :PosReportesForm:pagado" listener="#{repReportesSistemaController.setSelected(null)}"/>   
                
                
                <p:column sortBy="#{item.resReporte}" filterBy="#{item.resReporte}" filterMatchMode="contains">
                    <f:facet name="header">
                        <h:outputText value="#{posRepBundle['RepReportesSistemaLabel_resReporte']}"/>
                    </f:facet>        
                    <h:outputText value="#{item.resReporte}"/>
                </p:column>                                 
                
                <p:column sortBy="#{item.resFormato}" styleClass="columnFormato">
                    <f:facet name="header">
                        <h:outputText value="#{posRepBundle['RepReportesSistemaLabel_resFormato']}"/>
                    </f:facet>
                    <h:outputText value="#{item.resFormato}"/>
                </p:column>        
            </p:dataTable>
            
                    
            <p:panel id="PosRepFiltroPanel" header="Parámetros Generales">
                
                   <h:panelGroup id="alumno">
                    <ui:fragment rendered="#{repReportesSistemaController.selected ne null 
                                             and posRepResultadoController.compruebaParametro(repReportesSistemaController.selected, PosRepConstants.REP_PARAMETRO_ALUMNO)}">
                        <!--Filtro Estudiante-->
                        <ui:decorate template="/WEB-INF/templates/decorators/search/ups-search-param.xhtml">
                            <ui:define name="ups-search-param-title">  
                                <p:outputLabel value="#{posRepBundle['PosRepEstudiante']}:" />                        
                            </ui:define>

                            <ui:define name="ups-search-param-content">
                                <h:panelGroup id="posRepFiltrarEstudiante">
                                    <p:autoComplete id="posRepFiltrarEstudiante2" value="#{posRepResultadoController.insAlumnoWrapper}"                                
                                                    cache="true" forceSelection="true" maxResults="10" minQueryLength="2" cacheTimeout="30000"
                                                   var="p" 
                                                    itemLabel="#{not empty p?p.aluNombres:''}" 
                                                    itemValue="#{p}" 
                                                   
                                                 
                                                    autocomplete="on"
                                                    completeMethod="#{posRepResultadoController.autoCompleteAlumnos}"
                                                    queryDelay="0"                                                                       
                                                    > 
                                        <o:converter converterId="omnifaces.ListConverter" list="#{posRepResultadoController.listadoAlumnos}" />
                                           <p:column>
                                           <h:outputText value="#{p.cllcRuc}" />
                                           </p:column>
                                           <p:column>
                                               <h:outputText value="#{p.aluNombres}"/>
                                           </p:column>                                                     
                           
                                         <p:ajax event=  "itemSelect" update="posRepFiltrarAsignatura, posRepFiltrarGrupo, posRepFiltrarEstudiante" 
                                                 listener="#{posRepResultadoController.updateAsignaturaList()}"/>
                                         <p:ajax event="change" update="posRepFiltrarAsignatura, posRepFiltrarGrupo" 
                                                 listener="#{posRepResultadoController.updateAsignaturaList()}"/>
                                        
                                    </p:autoComplete>   
                                    <p:watermark value="Escriba nombre o apellido del estudiante, caso contrario será Todos." for="posRepFiltrarEstudiante2" />
                   
                                </h:panelGroup>
                            </ui:define>
                        </ui:decorate>
                    </ui:fragment>
                </h:panelGroup>
                         
                
                <h:panelGroup id="sede">
                    <ui:fragment rendered="#{repReportesSistemaController.selected ne null 
                                             and posRepResultadoController.compruebaParametro(repReportesSistemaController.selected, PosRepConstants.REP_PARAMETRO_SEDE)}">
                        <!--Filtro Sede-->
                        <ui:decorate template="/WEB-INF/templates/decorators/search/ups-search-param.xhtml">
                            <ui:define name="ups-search-param-title">
                                <p:outputLabel value="#{posRepBundle['Sede']}:" />                        
                            </ui:define>
                            <ui:define name="ups-search-param-content">                       
                                <p:selectOneMenu id="posRepFiltrarEstructuraSede" 
                                                 value="#{posRepResultadoController.orgEstructuraSede}"                                         
                                                 filter="true" filterMatchMode="contains" var="filtro">                                                        
                                    <f:selectItem itemLabel="#{posRepBundle['Todos']}" itemValue="" itemDisabled="#{posRepResultadoController.validaSeleccionEstructuraSeguridadSede}"/>
                                    <f:selectItems value="#{posRepResultadoController.orgEstructuraSedeList}"
                                                   var="orgEstructuraSedeItem"
                                                   itemValue="#{orgEstructuraSedeItem}"
                                                   itemLabel="#{orgEstructuraSedeItem.orgDescripcionEstructura.deeDescripcion.toString()}"
                                                   />
                                    <p:column>
                                        <h:outputText value="#{filtro.orgDescripcionEstructura.deeDescripcion}" />  
                                    </p:column>
                                    <p:ajax listener="#{posRepResultadoController.updateCampusList()}" 
                                            update="posRepFiltrarEstructuraCampus, posRepFiltrarEstructuraCarrera, posRepFiltrarPeriodoInicial, posRepFiltrarNivel, posRepFiltrarAsignatura, posRepFiltrarGrupo, posRepFiltrarDocente"/>
                                </p:selectOneMenu>
                            </ui:define>
                        </ui:decorate>
                    </ui:fragment>
                </h:panelGroup>
                
                <h:panelGroup id="campus">
                    <ui:fragment rendered="#{repReportesSistemaController.selected ne null 
                                             and posRepResultadoController.compruebaParametro(repReportesSistemaController.selected, PosRepConstants.REP_PARAMETRO_CAMPUS)}">
                        <!--Filtro Campus-->
                        <ui:decorate template="/WEB-INF/templates/decorators/search/ups-search-param.xhtml">
                            <ui:define name="ups-search-param-title">
                                <p:outputLabel value="#{posRepBundle['Campus']}:" />                        
                            </ui:define>
                            <ui:define name="ups-search-param-content">
                                <p:selectOneMenu id="posRepFiltrarEstructuraCampus" 
                                                 value="#{posRepResultadoController.orgEstructuraCampus}" 
                                                 filter="true" filterMatchMode="contains" var="filtro" >                                                        
                                    <f:selectItem itemLabel="#{posRepBundle['Todos']}" itemValue="" itemDisabled="#{posRepResultadoController.validaSeleccionEstructuraSeguridadCampus}"/>
                                    <f:selectItems value="#{posRepResultadoController.orgEstructuraCampusList}"
                                                   var="orgEstructuraCampusItem"
                                                   itemValue="#{orgEstructuraCampusItem}"
                                                   itemLabel="#{orgEstructuraCampusItem.orgDescripcionEstructura.deeDescripcion.toString()}"
                                                   />
                                    <p:column>
                                        <h:outputText value="#{filtro.orgDescripcionEstructura.deeDescripcion}" />  
                                    </p:column>   
                                    <p:ajax update="posRepFiltrarEstructuraCarrera, posRepFiltrarPeriodoInicial, posRepFiltrarNivel, posRepFiltrarAsignatura, posRepFiltrarGrupo, posRepFiltrarDocente"                                    
                                            listener="#{posRepResultadoController.updateCarreraList()}" 
                                            
                                            
                                            />
                                </p:selectOneMenu>
                            </ui:define>
                        </ui:decorate>
                    </ui:fragment>
                </h:panelGroup>
                
                <h:panelGroup id="programa">
                    <ui:fragment rendered="#{repReportesSistemaController.selected ne null 
                                             and posRepResultadoController.compruebaParametro(repReportesSistemaController.selected, PosRepConstants.REP_PARAMETRO_CARRERA)}">
                        <!--Filtro Carrera-->
                        <ui:decorate template="/WEB-INF/templates/decorators/search/ups-search-param.xhtml">
                            <ui:define name="ups-search-param-title">
                                <p:outputLabel value="#{posRepBundle['Programa']}:" />                        
                            </ui:define>

                            <ui:define name="ups-search-param-content">
                                <p:selectOneMenu id="posRepFiltrarEstructuraCarrera" 
                                                 value="#{posRepResultadoController.orgEstructuraCarrera}" 
                                                 filter="true" filterMatchMode="contains" var="filtro" >                                                        
                                    <f:selectItem itemLabel="#{posRepBundle['Todos']}" itemValue="" itemDisabled="#{posRepResultadoController.validaSeleccionEstructuraSeguridadCarrProg}"/>
                                    <f:selectItems value="#{posRepResultadoController.orgEstructuraCarreraList}"
                                                   var="orgEstructuraCarreraItem"
                                                   itemValue="#{orgEstructuraCarreraItem}"
                                                   itemLabel="#{orgEstructuraCarreraItem.orgDescripcionEstructura.deeDescripcion.toString()}"
                                                   />
                                    <p:column>
                                        <h:outputText value="#{filtro.orgDescripcionEstructura.deeDescripcion}" />  
                                    </p:column>    
                                    <p:ajax update=" posRepFiltrarPeriodoInicial, posRepFiltrarNivel,posRepFiltrarAsignatura, posRepFiltrarGrupo, posRepFiltrarDocente"                                    
                                            listener="#{posRepResultadoController.updateCarreraList()}" 
                                            />
                                </p:selectOneMenu>
                            </ui:define>
                        </ui:decorate>
                    </ui:fragment>
                </h:panelGroup>
                
                
                <h:panelGroup id="cohorte">
                    <ui:fragment rendered="#{repReportesSistemaController.selected ne null 
                                             and posRepResultadoController.compruebaParametro(repReportesSistemaController.selected, PosRepConstants.REP_PARAMETRO_PERIODO_INICIAL)}">
                        <!--Filtro Período Inicial-->
                        <ui:decorate template="/WEB-INF/templates/decorators/search/ups-search-param.xhtml">
                            <ui:define name="ups-search-param-title">  
                                <p:outputLabel value="#{posRepBundle['PosRepCohorte']}:" />                        
                            </ui:define>

                            <ui:define name="ups-search-param-content">
                                <p:selectOneMenu id="posRepFiltrarPeriodoInicial" value="#{posRepResultadoController.orgPeriodoInicial}"                                         
                                                 filter="true" filterMatchMode="contains" var="filtro" required="true" requiredMessage="Seleccione un Periodo Lectivo" >                            
                                    <f:selectItem itemLabel="#{posRepBundle['SelectOneMessage']}" itemValue=""/>
                                    <f:selectItems value="#{posRepResultadoController.orgPeriodoLectivoList}"
                                                   var="periodoLectivoItem"
                                                   itemValue="#{periodoLectivoItem}"
                                                   itemLabel="#{periodoLectivoItem.pelDescripcion.toString()} (#{posRepResultadoController.obtenerAnioPosgrado(periodoLectivoItem.pelFechaInicio,periodoLectivoItem.pelFechaFin)})"
                                                   />
                                    <p:column>
                                        <h:outputText value="#{filtro.pelDescripcion} (#{posRepResultadoController.obtenerAnioPosgrado(filtro.pelFechaInicio,filtro.pelFechaFin)})" />  
                                    </p:column>                 
                                    <p:ajax update="posRepFiltrarNivel,posRepFiltrarGrupo,posRepFiltrarDocente,"                                    
                                            listener="#{posRepResultadoController.updateNivelMallaList()}" 
                                             
                                    />
                                </p:selectOneMenu>                        
                            </ui:define>
                        </ui:decorate>
                    </ui:fragment>
                </h:panelGroup>
                            
<!--                 <h:panelGroup id="modalidad">
                    <ui:fragment rendered="#{repReportesSistemaController.selected ne null 
                                             and posRepResultadoController.compruebaParametro(repReportesSistemaController.selected, PosRepConstants.REP_PARAMETRO_MODALIDAD)}">
                      Filtro Modalidad 
                        <ui:decorate template="/WEB-INF/templates/decorators/search/ups-search-param.xhtml">
                            <ui:define name="ups-search-param-title">  
                                <p:outputLabel value="#{posRepBundle['PosRepModalidad']}:" />                        
                            </ui:define>

                            <ui:define name="ups-search-param-content">
                                <p:selectOneMenu id="posRepFiltrarModalidad" value="#{posRepResultadoController.pedModalidad}"                                         
                                                 filter="true" filterMatchMode="contains" var="filtro" 
                                                 >                            
                                   <f:selectItem itemLabel="#{posRepBundle['Todos']}" itemValue="" />
                                    <f:selectItems value="#{pedModalidadController.itemsNotDisabled}"
                                                   var="modalidadItem"
                                                   itemValue="#{modalidadItem}"
                                                   itemLabel="#{modalidadItem.modDescripcion.toString()}"
                                                   />
                                    <p:column>
                                        <h:outputText value="#{filtro.modDescripcion}" />  
                                    </p:column>    
                                   <p:ajax update="evaRepFiltrarCuestionario, evaRepFiltrarInformante"                                    
                                            listener="#{posRepResultadoController.updateEvaluacionCuestionarioList()}" 
                                            /> 
                                </p:selectOneMenu>                        
                            </ui:define>
                        </ui:decorate>
                    </ui:fragment>
                </h:panelGroup>                  -->
                                
                 <h:panelGroup id="nivel">
                    <ui:fragment rendered="#{repReportesSistemaController.selected ne null 
                                             and posRepResultadoController.compruebaParametro(repReportesSistemaController.selected, PosRepConstants.REP_PARAMETRO_NIVEL)}">
                        <!--Filtro NIVEL-->
                        <ui:decorate template="/WEB-INF/templates/decorators/search/ups-search-param.xhtml">
                            <ui:define name="ups-search-param-title">  
                                <p:outputLabel value="#{posRepBundle['PosRepNivel']}:" />                        
                            </ui:define>

                            <ui:define name="ups-search-param-content">
                                <p:selectOneMenu id="posRepFiltrarNivel" value="#{posRepResultadoController.pedNivelMalla}"                                         
                                                      filter="true" filterMatchMode="contains" var="filtro" 
                                                      >                            
                                         <f:selectItem itemLabel="#{posRepBundle['Todos']}" itemValue=""/>
                                         <f:selectItems value="#{posRepResultadoController.pedMallaNivelList}"
                                                        var="mallaNivelItem"
                                                        itemValue="#{mallaNivelItem}"
                                                        itemLabel="#{mallaNivelItem.toString()}"
                                                        />                            
                                         <p:column>
                                             <h:outputText value="#{filtro}" />  
                                         </p:column>
                           
                                         <p:ajax update="posRepFiltrarGrupo"                                    
                                                 listener="#{posRepResultadoController.updateGrupoList()}" 
                                                 />
                                     </p:selectOneMenu>                        
                                 </ui:define>
                        </ui:decorate>
                    </ui:fragment>
                </h:panelGroup>                                     
                                             
                <h:panelGroup id="docente">
                    <ui:fragment rendered="#{repReportesSistemaController.selected ne null 
                                             and posRepResultadoController.compruebaParametro(repReportesSistemaController.selected, PosRepConstants.REP_PARAMETRO_DOCENTE)}">
                        <!--Filtro Docente-->
                        <ui:decorate template="/WEB-INF/templates/decorators/search/ups-search-param.xhtml">
                            <ui:define name="ups-search-param-title">  
                                <p:outputLabel value="#{posRepBundle['PosRepDocente']}:" />                        
                            </ui:define>

                            <ui:define name="ups-search-param-content">
                                <h:panelGroup id="posRepFiltrarDocente">
                                    <p:autoComplete id="posRepFiltrarDocente2" value="#{posRepResultadoController.gthPersona}"                                
                                                    cache="true" forceSelection="true" maxResults="10" minQueryLength="2" cacheTimeout="30000"
                                                    var="p" itemLabel="#{p.perNroIdentificacion.concat(' - ').concat(p.perApellidos).concat(' ').concat(p.perNombres)}" itemValue="#{p}" 
                                                    autocomplete="on"
                                                    completeMethod="#{posRepResultadoController.completePersona}"
                                                    queryDelay="0"                                                                       
                                                    > 
                                        <o:converter converterId="omnifaces.ListConverter" list="#{posRepResultadoController.gthPersonaList}" />

                                        <p:column>
                                            <h:outputText value="#{p.perNroIdentificacion}" />
                                        </p:column>

                                        <p:column>
                                            <h:outputText value="#{p.perApellidos} #{p.perNombres}" />
                                        </p:column>                                                        
                                         <p:ajax event=  "itemSelect" update="posRepFiltrarAsignatura, posRepFiltrarGrupo, posRepFiltrarDocente" 
                                                 listener="#{posRepResultadoController.updateAsignaturaList()}"/>
                                         <p:ajax event="change" update="posRepFiltrarAsignatura, posRepFiltrarGrupo" 
                                                 listener="#{posRepResultadoController.updateAsignaturaList()}"/>
                                        
                                    </p:autoComplete>                                                         
                                    <p:watermark value="Escriba nombre o apellido de la persona, caso contrario será Todos." for="posRepFiltrarDocente2" />
                             
                                </h:panelGroup>
                            </ui:define>
                        </ui:decorate>
                    </ui:fragment>
                </h:panelGroup>
                
                <h:panelGroup id="asignatura">
                    <ui:fragment rendered="#{repReportesSistemaController.selected ne null 
                                             and posRepResultadoController.compruebaParametro(repReportesSistemaController.selected, PosRepConstants.REP_PARAMETRO_ASIGNATURA)}">
                        <!--Filtro Asignatura-->
                        <ui:decorate template="/WEB-INF/templates/decorators/search/ups-search-param.xhtml">
                            <ui:define name="ups-search-param-title">   
                                <p:outputLabel value="#{posRepBundle['PosRepAsignatura']}:" />                        
                            </ui:define>

                            <ui:define name="ups-search-param-content">
                                <p:selectOneMenu id="posRepFiltrarAsignatura" value="#{posRepResultadoController.pedMalla}"                                         
                                                 filter="true" filterMatchMode="contains" var="filtro" 
                                                 >                            
                                    <f:selectItem itemLabel="#{posRepBundle['Todos']}" itemValue=""/>
                                    <f:selectItems value="#{posRepResultadoController.pedMallaList}"
                                                   var="mallaItem"
                                                   itemValue="#{mallaItem}"
                                                   itemLabel="#{mallaItem.pedMateria.matDescripcion.toString()}"
                                                   />                            
                                    <p:column>
                                        <h:outputText value="#{filtro.malCodigoAsignatura}" />  
                                    </p:column>
                                    <p:column>
                                        <h:outputText value="#{filtro.pedMateria.matDescripcion}" />  
                                    </p:column>   
                                    <p:ajax update="posRepFiltrarGrupo"                                    
                                            listener="#{posRepResultadoController.updateGrupoList()}" 
                                     />
                                </p:selectOneMenu>                        
                            </ui:define>
                        </ui:decorate>
                    </ui:fragment>
                </h:panelGroup>
                
                <h:panelGroup id="grupo">
                    <ui:fragment rendered="#{repReportesSistemaController.selected ne null 
                                             and posRepResultadoController.compruebaParametro(repReportesSistemaController.selected, PosRepConstants.REP_PARAMETRO_GRUPO)}">
                        <!--Filtro Grupo-->
                        <ui:decorate template="/WEB-INF/templates/decorators/search/ups-search-param.xhtml">
                            <ui:define name="ups-search-param-title">    
                                <p:outputLabel value="#{posRepBundle['PosRepGrupo']}:" />                        
                            </ui:define>

                            <ui:define name="ups-search-param-content">
                                <p:selectOneMenu id="posRepFiltrarGrupo" value="#{posRepResultadoController.ofeGrupo}"                                         
                                                 filter="true" filterMatchMode="contains" var="filtro" 
                                                 >                            
                                    <f:selectItem itemLabel="#{posRepBundle['Todos']}" itemValue=""/>
                                    <f:selectItems value="#{posRepResultadoController.ofeGrupoList}"
                                                   var="grupoItem"
                                                   itemValue="#{grupoItem}"
                                                   itemLabel="#{grupoItem.gruDescripcion.toString()}"
                                                   />  
                                    <p:column>
                                        <h:outputText value="#{filtro.gruCodigo}" />  
                                    </p:column>
                                    <p:column>
                                        <h:outputText value="#{filtro.gruDescripcion}" />  
                                    </p:column>                           
                                </p:selectOneMenu>                        
                            </ui:define>
                        </ui:decorate>
                    </ui:fragment>
                </h:panelGroup>
               
     <h:panelGroup id="pagado">
                    <ui:fragment rendered="#{repReportesSistemaController.selected ne null 
                                             and posRepResultadoController.compruebaParametro(repReportesSistemaController.selected, PosRepConstants.REP_PARAMETRO_PAGADO)}">
                        <!--Filtro Pagado-->
                        <ui:decorate template="/WEB-INF/templates/decorators/search/ups-search-param.xhtml">
                            <ui:define name="ups-search-param-title">    
                                <p:outputLabel value="#{posRepBundle['PosRepPagado']}:" />                        
                            </ui:define>

                            <ui:define name="ups-search-param-content">
                                <p:selectOneMenu id="posRepFiltrarPagado" value="#{posRepResultadoController.pafPagado}"                                         
                                                 filter="true" filterMatchMode="contains" 
                                                 >                            
                                    <f:selectItem itemLabel="#{posRepBundle['Todos']}" itemValue="%"/>                  
                                    <f:selectItem itemLabel="SI" itemValue="S" />
                                    <f:selectItem itemLabel="NO" itemValue="N" />
                                    
                               </p:selectOneMenu>                        
                            </ui:define>
                        </ui:decorate>
                    </ui:fragment>
              </h:panelGroup>             
            </p:panel>                           
        </p:panel>
        
        
        <p:toolbar id="PosRepExportToolbar">  
            <us:auth permissions="{'operations':['GENERAR']}">

                <p:toolbarGroup align="center">                
                    <p:commandLink id="nonAjaxExcel"                                    
                                   ajax="false"
                                   update="messagePanel"                                   
                                   actionListener="#{posRepGeneralController.generar_reporte_generico('xlsx')}"
                                   disabled="#{repReportesSistemaController.selected.resFormato eq null or (repReportesSistemaController.selected.resFormato ne 'EXCEL' and repReportesSistemaController.selected.resFormato ne 'PDF - EXCEL')}">  
                        <p:graphicImage library="ups-template" 
                                        name="images/icons/apps/xls.png" 
                                        alt="#{posRepBundle['ExportXls']}" 
                                        title="#{posRepBundle['ExportXls']}"/>  
                    </p:commandLink>
                    <p:commandLink id="nonAjaxPdf"                                    
                                   ajax="false"
                                   update="messagePanel"
                                   actionListener="#{posRepGeneralController.generar_reporte_generico('pdf')}"
                                   disabled="#{repReportesSistemaController.selected.resFormato eq null or (repReportesSistemaController.selected.resFormato ne 'PDF' and repReportesSistemaController.selected.resFormato ne 'PDF - EXCEL')}">
                        <p:graphicImage library="ups-template" 
                                        name="images/icons/apps/pdf.png" 
                                        alt="#{posRepBundle['ExportPdf']}" 
                                        title="#{posRepBundle['ExportPdf']}"/>  
                    </p:commandLink>                
                </p:toolbarGroup>

            </us:auth>
        </p:toolbar>
    </h:form>
</ui:composition>
